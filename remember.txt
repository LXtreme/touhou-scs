
# DANMAKU DESIGN NOTES:
Rings: explore letting the faster bullets of a later ring to pass slower bullets of an earlier ring, resulting in pattern overlap and higher complexity.



Micrododge idea: make shapes out of bullets, that then disintegrate into more spread out bullets, making the player micrododge through the mess.

Macrododge idea: include large bullets or large shapes made of bullets that are sent in full (e.g. large circles of bullets moving downwards), forcing the player to dodge around them. Additionally, can create rings of these larger macro formations (maybe around 3-4).


# BUG NOTES:
- If bullet collisions are delayed, its from some weird onExit mismatch stuff. Restart/recompiling and switching onExit a few times eventually might fix it. Current theory: WSLiveEditor has stability issues when alt-tabbing back in before it finishes. Wait it out. Update: try panning to where the triggers get placed (triggerarea) before running main.js

- If adding a new trigger/object, make sure you check EVERY default (dont repeat the KeyframeAnim mistake)

Keep stage practice in mind: 
all spells are modular and should be able to run in a vacuum

# STAGES #
Premise: Comet shatters as it crashes into gensokyo, some spot a strange structure/shapes on the biggest broken piece as it crashed. 
(show this on title screen and allude during dialogue)
Stage 1: Outskirts of human village and shrine
Midboss: Daiyousei
Endboss: Cirno
Stage 2: Forest of Magic entrance -> leading deeper as stage progresses
Midboss: Mystia
Endboss: Mystia
Stage 3: Deep in Forest of Magic near Alice's house
Midboss: Alice
Endboss: Alice
Stage 4: Youkai Trail (trees & foliage, increasing bamboo throughout stage progress)
Midboss: Kogasa
Endboss: Aya Shameimaru (reporter who gives the spill to where meteor landed, she was heading there herself)
Stage 5: Bamboo forest near Eientei
Midboss: Reisen or tewi
Endboss: Reisen
Stage 6: crash site (a bit of fire near the end, approaches alien structure )
Midboss: none
Endboss: ??? (formerly called Nameless Entity)

TODO:
- PointerCircle: Add 'follow rotation' alongside 'follow position'

- Minor Optimization: Cache 'enforce_solid_groups' if used multiple times for the same groups

- Optimization: set explicit 'follow rotate' and 'follow' instead of assuming both, to cut down on triggers.

- Make PointerCircle have tighter setup timings (currently takes multiple ticks instead of ~3)

- Add basic Bombing (keybind + texture)

- Add rounding to 6 significant digits to trigger spread 
  (to make sure rounded X positions dont break spawn order)

- Followed ring pattern: Bullets spawn in a ring formation, but all go in the same direction and speed, keeping their original shape as they move. You can make it optionally rotate on each patterns center, but that would require a pointer for each shape.

- Offset ring pattern: the bullets spawn at 'r' distance offset from the center instead of on the center. To easily implement, just have the bullet move a t=0 moveTowards after spawning at center, towards the guidercircle parts.

- Stacked ring pattern: have multiple arcs/radials spawn at the same time, with different speeds (like instant.Line but a circular formation of them).

- Find out if its possible to have the entire enemy attack comp use placeholder emitters
(current verdict: not possible cuz spawn limit)

- Add Item pickups (power, bomb, score)

- Minor Optimization: Use Keyframe Anim's time-mod or scale-mod to possibly re-use keyframe components. This will depend on t/hold timing or scaling ratios.

TODO SYSTEMS:

All UI (health, bombs, score)
Title screen
Backgrounds
3 Character movement profiles --> has been set, not finalized
Keybind editor
Bullet types (only 4 out of 8)
Lasers
Main Bullet SFX (1 made)
Player Shot types
Item Pickups


GROUP/OBJ BUDGET:
Groups (9999 limit): 
 
Bullet types: 3,000 - 5,000 
Pickups: 300 - 500 
Player shots: 1,050 - 1,800 
Common enemies: 544 - 1,000 
Total usage: 4,894 - 8,300 groups 
Remaining: 1,699 - 5,105 groups 
Objects (250k target): 
 
Current: 20k 
Spells: 10k - 30k 
Common enemies: 11k - 36k 
Player shots: 1.5k - 4k 
Backgrounds: 2k - 5k 
UI: 3k - 8k 
Visual effects: 5k - 10k 
Total projected: 52.5k - 113k objects 
Remaining budget: 137k - 197k objects


MAKE BULLETS BOUNCE (off walls and such):
use advanced follow with all 0 on mode 2
use edit advanced follow to change velocity
